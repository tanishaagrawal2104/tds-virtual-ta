<!DOCTYPE html>
<!-- saved from url=(0042)https://tds.s-anand.net/#/vector-databases -->
<html lang="en" class="themeable"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  
  <title>Vector databases</title>
  <link rel="icon" href="https://raw.githubusercontent.com/gramener/assets/main/straive-favicon.svg">
  <link rel="stylesheet" media="(prefers-color-scheme: dark)" href="./Vector databases_files/theme-simple-dark.css">
  <link rel="stylesheet" media="(prefers-color-scheme: light)" href="./Vector databases_files/theme-simple.css">
  <style>
    /* Add a YouTube icon on top of all YouTube links with images */
    a[href*="youtu"]:has(img[src*="ytimg"]) {
      position: relative;
      display: inline-block;
    }

    a[href*="youtu"]:has(img[src*="ytimg"])::after {
      content: "";
      position: absolute;
      left: 50%;
      top: 50%;
      width: 100px;
      height: 100px;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="red" class="bi bi-youtube" viewBox="0 0 16 16"><path d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.01 2.01 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.01 2.01 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31 31 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.01 2.01 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A100 100 0 0 1 7.858 2z"/><path d="M6.4 5.209v4.818l4.157-2.408z" fill="white"/></svg>') no-repeat center center;
      background-size: contain;
      transform: translate(-50%, -50%);
      pointer-events: none;
    }

  </style>
<style type="text/css">.medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}</style><style type="text/css">.docsify-pagination-container{display:flex;flex-wrap:wrap;justify-content:space-between;overflow:hidden;margin:5em 0 1em;border-top:1px solid rgba(0,0,0,.07)}.pagination-item{margin-top:2.5em}.pagination-item a,.pagination-item a:hover{text-decoration:none}.pagination-item a{color:currentColor}.pagination-item a:hover .pagination-item-title{text-decoration:underline}.pagination-item:not(:last-child) a .pagination-item-label,.pagination-item:not(:last-child) a .pagination-item-subtitle,.pagination-item:not(:last-child) a .pagination-item-title{opacity:.3;transition:all .2s}.pagination-item:last-child .pagination-item-label,.pagination-item:not(:last-child) a:hover .pagination-item-label{opacity:.6}.pagination-item:not(:last-child) a:hover .pagination-item-title{opacity:1}.pagination-item-label{font-size:.8em}.pagination-item-label>*{line-height:1;vertical-align:middle}.pagination-item-label svg{height:.8em;width:auto;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1px}.pagination-item--next{margin-left:auto;text-align:right}.pagination-item--next svg{margin-left:.5em}.pagination-item--previous svg{margin-right:.5em}.pagination-item-title{font-size:1.6em}.pagination-item-subtitle{text-transform:uppercase;opacity:.3}</style><style type="text/css">.docsify-copy-code-button,.docsify-copy-code-button>span{cursor:pointer;transition:all .25s ease}.docsify-copy-code-button{background:grey;background:var(--theme-color,grey);border:0;border-radius:0;color:#fff;font-size:1em;opacity:0;outline:0;overflow:visible;padding:.65em .8em;position:absolute;right:0;top:0;z-index:1}.docsify-copy-code-button>span{background:inherit;border-radius:3px;pointer-events:none}.docsify-copy-code-button>.error,.docsify-copy-code-button>.success{font-size:.825em;opacity:0;padding:.5em .65em;position:absolute;right:0;top:50%;transform:translateY(-50%);z-index:-100}.docsify-copy-code-button.error>.error,.docsify-copy-code-button.success>.success{opacity:1;right:100%;transform:translate(-25%,-50%)}.docsify-copy-code-button:focus,pre:hover .docsify-copy-code-button{opacity:1}.docsify-copy-code-button>[aria-live]{height:1px;left:-10000px;overflow:hidden;position:absolute;top:auto;width:1px}</style><style type="text/css">.sidebar-nav > ul > li ul {
  display: none;
}

.app-sub-sidebar {
  display: none;
}

.app-sub-sidebar.open {
  display: block;
}

.sidebar-nav .open > ul:not(.app-sub-sidebar),
.sidebar-nav .active:not(.collapse) > ul {
  display: block;
}

/* 抖动 */
.sidebar-nav li.open:not(.collapse) > ul {
  display: block;
}

.active + ul.app-sub-sidebar {
  display: block;
}
</style><style type="text/css">@media screen and (max-width: 768px) {
  /* 移动端适配 */
  .markdown-section {
    max-width: none;
    padding: 16px;
  }
  /* 改变原来按钮热区大小 */
  .sidebar-toggle {
    padding: 0 0 10px 10px;
  }
  /* my pin */
  .sidebar-pin {
    appearance: none;
    outline: none;
    position: fixed;
    bottom: 0;
    border: none;
    width: 40px;
    height: 40px;
    background: transparent;
  }
}
</style><style>:root{--theme-color: #dc3545;}</style><style>
.sidebar {
  padding-top: 0;
}

.search {
  margin-bottom: 20px;
  padding: 6px;
  border-bottom: 1px solid #eee;
}

.search .input-wrap {
  display: flex;
  align-items: center;
}

.search .results-panel {
  display: none;
}

.search .results-panel.show {
  display: block;
}

.search input {
  outline: none;
  border: none;
  width: 100%;
  padding: 0.6em 7px;
  font-size: inherit;
  border: 1px solid transparent;
}

.search input:focus {
  box-shadow: 0 0 5px var(--theme-color, #42b983);
  border: 1px solid var(--theme-color, #42b983);
}

.search input::-webkit-search-decoration,
.search input::-webkit-search-cancel-button,
.search input {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

.search input::-ms-clear {
  display: none;
  height: 0;
  width: 0;
}

.search .clear-button {
  cursor: pointer;
  width: 36px;
  text-align: right;
  display: none;
}

.search .clear-button.show {
  display: block;
}

.search .clear-button svg {
  transform: scale(.5);
}

.search h2 {
  font-size: 17px;
  margin: 10px 0;
}

.search a {
  text-decoration: none;
  color: inherit;
}

.search .matching-post {
  border-bottom: 1px solid #eee;
}

.search .matching-post:last-child {
  border-bottom: 0;
}

.search p {
  font-size: 14px;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.search p.empty {
  text-align: center;
}

.app-name.hide, .sidebar-nav.hide {
  display: none;
}</style><style></style><style></style><style></style><style></style><style></style></head>

<body data-platform="Win32" class="ready sticky ready-fix vsc-initialized" data-page="vector-databases.md" data-new-gr-c-s-check-loaded="14.1239.0" data-gr-ext-installed="">
  <main><button class="sidebar-toggle" aria-label="Menu"><div class="sidebar-toggle-button"><span></span><span></span><span></span></div></button><aside class="sidebar"><div class="search"><div class="input-wrap">
      <input type="search" value="" aria-label="Search text" placeholder="Type to search">
      <button class="clear-button" aria-label="Clear search">
                <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="8" cy="8" r="8" fill="black"></circle>
                    <path stroke="white" stroke-width="1.5" d="M4.5,4.5,11.5,11.5" vector-effect="non-scaling-stroke"></path>
                    <path stroke="white" stroke-width="1.5" d="M4.5,11.5,11.5,4.5" vector-effect="non-scaling-stroke"></path>
                </svg>
            </button>
    </div>
    <div class="results-panel"></div>
    </div><h1 class="app-name"><a class="app-name-link" data-nosearch="" href="https://tds.s-anand.net/">Tools in Data Science</a></h1><div class="sidebar-nav"><ul><li class="file"><a href="https://tds.s-anand.net/#/README" title="Tools in Data Science">Tools in Data Science</a></li><li class="folder level-1"><a href="https://tds.s-anand.net/#/development-tools" title="1. Development Tools">1. Development Tools</a><ul><li class="file"><a href="https://tds.s-anand.net/#/vscode" title="Editor: VS Code">Editor: VS Code</a></li><li class="file"><a href="https://tds.s-anand.net/#/github-copilot" title="AI Code Editors: GitHub Copilot">AI Code Editors: GitHub Copilot</a></li><li class="file"><a href="https://tds.s-anand.net/#/uv" title="Python tools: uv">Python tools: uv</a></li><li class="file"><a href="https://tds.s-anand.net/#/npx" title="JavaScript tools: npx">JavaScript tools: npx</a></li><li class="file"><a href="https://tds.s-anand.net/#/unicode" title="Unicode">Unicode</a></li><li class="file"><a href="https://tds.s-anand.net/#/devtools" title="Browser: DevTools">Browser: DevTools</a></li><li class="file"><a href="https://tds.s-anand.net/#/css-selectors" title="CSS Selectors">CSS Selectors</a></li><li class="file"><a href="https://tds.s-anand.net/#/json" title="JSON">JSON</a></li><li class="file"><a href="https://tds.s-anand.net/#/bash" title="Terminal: Bash">Terminal: Bash</a></li><li class="file"><a href="https://tds.s-anand.net/#/llm" title="AI Terminal Tools: llm">AI Terminal Tools: llm</a></li><li class="file"><a href="https://tds.s-anand.net/#/spreadsheets" title="Spreadsheet: Excel, Google Sheets">Spreadsheet: Excel, Google Sheets</a></li><li class="file"><a href="https://tds.s-anand.net/#/sqlite" title="Database: SQLite">Database: SQLite</a></li><li class="file"><a href="https://tds.s-anand.net/#/git" title="Version Control: Git, GitHub">Version Control: Git, GitHub</a></li></ul></li><li class="folder level-1"><a href="https://tds.s-anand.net/#/deployment-tools" title="2. Deployment Tools">2. Deployment Tools</a><ul><li class="file"><a href="https://tds.s-anand.net/#/markdown" title="Markdown">Markdown</a></li><li class="file"><a href="https://tds.s-anand.net/#/image-compression" title="Images: Compression">Images: Compression</a></li><li class="file"><a href="https://tds.s-anand.net/#/github-pages" title="Static hosting: GitHub Pages">Static hosting: GitHub Pages</a></li><li class="file"><a href="https://tds.s-anand.net/#/colab" title="Notebooks: Google Colab">Notebooks: Google Colab</a></li><li class="file"><a href="https://tds.s-anand.net/#/vercel" title="Serverless hosting: Vercel">Serverless hosting: Vercel</a></li><li class="file"><a href="https://tds.s-anand.net/#/github-actions" title="CI/CD: GitHub Actions">CI/CD: GitHub Actions</a></li><li class="file"><a href="https://tds.s-anand.net/#/docker" title="Containers: Docker, Podman">Containers: Docker, Podman</a></li><li class="file"><a href="https://tds.s-anand.net/#/github-codespaces" title="DevContainers: GitHub Codespaces">DevContainers: GitHub Codespaces</a></li><li class="file"><a href="https://tds.s-anand.net/#/ngrok" title="Tunneling: ngrok">Tunneling: ngrok</a></li><li class="file"><a href="https://tds.s-anand.net/#/cors" title="CORS">CORS</a></li><li class="file"><a href="https://tds.s-anand.net/#/rest-apis" title="REST APIs">REST APIs</a></li><li class="file"><a href="https://tds.s-anand.net/#/fastapi" title="Web Framework: FastAPI">Web Framework: FastAPI</a></li><li class="file"><a href="https://tds.s-anand.net/#/google-auth" title="Authentication: Google Auth">Authentication: Google Auth</a></li><li class="file"><a href="https://tds.s-anand.net/#/ollama" title="Local LLMs: Ollama">Local LLMs: Ollama</a></li></ul></li><li class="open folder level-1"><a href="https://tds.s-anand.net/#/large-language-models" title="3. Large Language Models">3. Large Language Models</a><ul><li class="file"><a href="https://tds.s-anand.net/#/prompt-engineering" title="Prompt engineering">Prompt engineering</a></li><li class="file"><a href="https://tds.s-anand.net/#/tds-ta-instructions" title="TDS TA Instructions">TDS TA Instructions</a></li><li class="file"><a href="https://tds.s-anand.net/#/tds-gpt-reviewer" title="TDS GPT Reviewer">TDS GPT Reviewer</a></li><li class="file"><a href="https://tds.s-anand.net/#/llm-sentiment-analysis" title="LLM Sentiment Analysis">LLM Sentiment Analysis</a></li><li class="file"><a href="https://tds.s-anand.net/#/llm-text-extraction" title="LLM Text Extraction">LLM Text Extraction</a></li><li class="file"><a href="https://tds.s-anand.net/#/base64-encoding" title="Base 64 Encoding">Base 64 Encoding</a></li><li class="file"><a href="https://tds.s-anand.net/#/vision-models" title="Vision Models">Vision Models</a></li><li class="file"><a href="https://tds.s-anand.net/#/embeddings" title="Embeddings">Embeddings</a></li><li class="file"><a href="https://tds.s-anand.net/#/multimodal-embeddings" title="Multimodal Embeddings">Multimodal Embeddings</a></li><li class="file"><a href="https://tds.s-anand.net/#/topic-modeling" title="Topic modeling">Topic modeling</a></li><li class="active open file"><a href="https://tds.s-anand.net/#/vector-databases" title="Vector databases">Vector databases</a><ul class="app-sub-sidebar"><li class="file"><a class="section-link" href="https://tds.s-anand.net/#/vector-databases?id=vector-databases" title="Vector Databases">Vector Databases</a></li></ul></li><li class="file"><a href="https://tds.s-anand.net/#/rag-cli" title="RAG with the CLI)">RAG with the CLI)</a></li><li class="file"><a href="https://tds.s-anand.net/#/hybrid-rag-typesense" title="Hybrid RAG with TypeSense">Hybrid RAG with TypeSense</a></li><li class="file"><a href="https://tds.s-anand.net/#/function-calling" title="Function Calling">Function Calling</a></li><li class="file"><a href="https://tds.s-anand.net/#/llm-agents" title="LLM Agents">LLM Agents</a></li><li class="file"><a href="https://tds.s-anand.net/#/llm-image-generation" title="LLM Image Generation">LLM Image Generation</a></li><li class="file"><a href="https://tds.s-anand.net/#/llm-speech" title="LLM Speech">LLM Speech</a></li><li class="file"><a href="https://tds.s-anand.net/#/llm-evals" title="LLM Evals">LLM Evals</a></li></ul></li><li class="file"><a href="https://tds.s-anand.net/#/project-tds-virtual-ta" title="Project 1">Project 1</a></li><li class="folder level-1"><a href="https://tds.s-anand.net/#/data-sourcing" title="4. Data Sourcing">4. Data Sourcing</a><ul><li class="file"><a href="https://tds.s-anand.net/#/scraping-with-excel" title="Scraping with Excel">Scraping with Excel</a></li><li class="file"><a href="https://tds.s-anand.net/#/scraping-with-google-sheets" title="Scraping with Google Sheets">Scraping with Google Sheets</a></li><li class="file"><a href="https://tds.s-anand.net/#/crawling-cli" title="Crawling with the CLI">Crawling with the CLI</a></li><li class="file"><a href="https://tds.s-anand.net/#/bbc-weather-api-with-python" title="BBC Weather API with Python">BBC Weather API with Python</a></li><li class="file"><a href="https://tds.s-anand.net/#/scraping-imdb-with-javascript" title="Scraping IMDb with JavaScript">Scraping IMDb with JavaScript</a></li><li class="file"><a href="https://tds.s-anand.net/#/nominatim-api-with-python" title="Nominatim API with Python">Nominatim API with Python</a></li><li class="file"><a href="https://tds.s-anand.net/#/wikipedia-data-with-python" title="Wikipedia Data with Python">Wikipedia Data with Python</a></li><li class="file"><a href="https://tds.s-anand.net/#/scraping-pdfs-with-tabula" title="Scraping PDFs with Tabula">Scraping PDFs with Tabula</a></li><li class="file"><a href="https://tds.s-anand.net/#/convert-pdfs-to-markdown" title="Convert PDFs to Markdown">Convert PDFs to Markdown</a></li><li class="file"><a href="https://tds.s-anand.net/#/convert-html-to-markdown" title="Convert HTML to Markdown">Convert HTML to Markdown</a></li><li class="file"><a href="https://tds.s-anand.net/#/llm-website-scraping" title="LLM Website Scraping">LLM Website Scraping</a></li><li class="file"><a href="https://tds.s-anand.net/#/llm-video-screen-scraping" title="LLM Video Screen-Scraping">LLM Video Screen-Scraping</a></li><li class="file"><a href="https://tds.s-anand.net/#/web-automation-with-playwright" title="Web Automation with Playwright">Web Automation with Playwright</a></li><li class="file"><a href="https://tds.s-anand.net/#/scheduled-scraping-with-github-actions" title="Scheduled Scraping with GitHub Actions">Scheduled Scraping with GitHub Actions</a></li><li class="file"><a href="https://tds.s-anand.net/#/scraping-emarketer" title="Scraping emarketer.com">Scraping emarketer.com</a></li><li class="file"><a href="https://tds.s-anand.net/#/scraping-live-sessions" title="Scraping: Live Sessions">Scraping: Live Sessions</a></li></ul></li><li class="folder level-1"><a href="https://tds.s-anand.net/#/data-preparation" title="5. Data Preparation">5. Data Preparation</a><ul><li class="file"><a href="https://tds.s-anand.net/#/data-cleansing-in-excel" title="Data Cleansing in Excel">Data Cleansing in Excel</a></li><li class="file"><a href="https://tds.s-anand.net/#/data-transformation-in-excel" title="Data Transformation in Excel">Data Transformation in Excel</a></li><li class="file"><a href="https://tds.s-anand.net/#/splitting-text-in-excel" title="Splitting Text in Excel">Splitting Text in Excel</a></li><li class="file"><a href="https://tds.s-anand.net/#/data-aggregation-in-excel" title="Data Aggregation in Excel">Data Aggregation in Excel</a></li><li class="file"><a href="https://tds.s-anand.net/#/data-preparation-in-the-shell" title="Data Preparation in the Shell">Data Preparation in the Shell</a></li><li class="file"><a href="https://tds.s-anand.net/#/data-preparation-in-the-editor" title="Data Preparation in the Editor">Data Preparation in the Editor</a></li><li class="file"><a href="https://tds.s-anand.net/#/data-preparation-in-duckdb" title="Data Preparation in DuckDB">Data Preparation in DuckDB</a></li><li class="file"><a href="https://tds.s-anand.net/#/cleaning-data-with-openrefine" title="Cleaning Data with OpenRefine">Cleaning Data with OpenRefine</a></li><li class="file"><a href="https://tds.s-anand.net/#/parsing-json" title="Parsing JSON">Parsing JSON</a></li><li class="file"><a href="https://tds.s-anand.net/#/dbt" title="Data Transformation with dbt">Data Transformation with dbt</a></li><li class="file"><a href="https://tds.s-anand.net/#/transforming-images" title="Transforming Images">Transforming Images</a></li><li class="file"><a href="https://tds.s-anand.net/#/extracting-audio-and-transcripts" title="Extracting Audio and Transcripts">Extracting Audio and Transcripts</a><!-- #TODO Stitching together podcasts from snippets using SoX? --></li></ul></li><li class="folder level-1"><a href="https://tds.s-anand.net/#/data-analysis" title="6. Data Analysis">6. Data Analysis</a><ul><li class="file"><a href="https://tds.s-anand.net/#/correlation-with-excel" title="Correlation with Excel">Correlation with Excel</a></li><li class="file"><a href="https://tds.s-anand.net/#/regression-with-excel" title="Regression with Excel">Regression with Excel</a></li><li class="file"><a href="https://tds.s-anand.net/#/forecasting-with-excel" title="Forecasting with Excel">Forecasting with Excel</a></li><li class="file"><a href="https://tds.s-anand.net/#/outlier-detection-with-excel" title="Outlier Detection with Excel">Outlier Detection with Excel</a></li><li class="file"><a href="https://tds.s-anand.net/#/data-analysis-with-python" title="Data Analysis with Python">Data Analysis with Python</a></li><li class="file"><a href="https://tds.s-anand.net/#/data-analysis-with-sql" title="Data Analysis with SQL">Data Analysis with SQL</a></li><li class="file"><a href="https://tds.s-anand.net/#/data-analysis-with-datasette" title="Data Analysis with Datasette">Data Analysis with Datasette</a></li><li class="file"><a href="https://tds.s-anand.net/#/data-analysis-with-duckdb" title="Data Analysis with DuckDB">Data Analysis with DuckDB</a></li><li class="file"><a href="https://tds.s-anand.net/#/data-analysis-with-chatgpt" title="Data Analysis with ChatGPT">Data Analysis with ChatGPT</a></li><li class="file"><a href="https://tds.s-anand.net/#/geospatial-analysis-with-excel" title="Geospatial Analysis with Excel">Geospatial Analysis with Excel</a></li><li class="file"><a href="https://tds.s-anand.net/#/geospatial-analysis-with-python" title="Geospatial Analysis with Python">Geospatial Analysis with Python</a></li><li class="file"><a href="https://tds.s-anand.net/#/geospatial-analysis-with-qgis" title="Geospatial Analysis with QGIS">Geospatial Analysis with QGIS</a></li><li class="file"><a href="https://tds.s-anand.net/#/network-analysis-in-python" title="Network Analysis in Python">Network Analysis in Python</a></li></ul></li><li class="file">Project 2</li><li class="folder level-1"><a href="https://tds.s-anand.net/#/data-visualization" title="7. Data Visualization">7. Data Visualization</a><ul><li class="file"><a href="https://tds.s-anand.net/#/visualizing-forecasts-with-excel" title="Visualizing Forecasts with Excel">Visualizing Forecasts with Excel</a></li><li class="file"><a href="https://tds.s-anand.net/#/visualizing-animated-data-with-powerpoint" title="Visualizing Animated Data with PowerPoint">Visualizing Animated Data with PowerPoint</a></li><li class="file"><a href="https://tds.s-anand.net/#/visualizing-animated-data-with-flourish" title="Visualizing Animated Data with Flourish">Visualizing Animated Data with Flourish</a></li><li class="file"><a href="https://tds.s-anand.net/#/visualizing-network-data-with-kumu" title="Visualizing Network Data with Kumu">Visualizing Network Data with Kumu</a></li><li class="file"><a href="https://tds.s-anand.net/#/visualizing-charts-with-excel" title="Visualizing Charts with Excel">Visualizing Charts with Excel</a></li><li class="file"><a href="https://tds.s-anand.net/#/data-visualization-with-seaborn" title="Data Visualization with Seaborn">Data Visualization with Seaborn</a></li><li class="file"><a href="https://tds.s-anand.net/#/data-visualization-with-chatgpt" title="Data Visualization with ChatGPT">Data Visualization with ChatGPT</a></li><li class="file"><a href="https://tds.s-anand.net/#/actor-network-visualization" title="Actor Network Visualization">Actor Network Visualization</a></li><li class="file"><a href="https://tds.s-anand.net/#/rawgraphs" title="RAWgraphs">RAWgraphs</a></li><li class="file"><a href="https://tds.s-anand.net/#/data-storytelling" title="Data Storytelling">Data Storytelling</a></li><li class="file"><a href="https://tds.s-anand.net/#/narratives-with-llms" title="Narratives with LLMs">Narratives with LLMs</a></li><li class="file"><a href="https://tds.s-anand.net/#/marimo" title="Interactive Notebooks: Marimo">Interactive Notebooks: Marimo</a></li><li class="file"><a href="https://tds.s-anand.net/#/revealjs" title="HTML Slides: RevealJS">HTML Slides: RevealJS</a></li><li class="file"><a href="https://tds.s-anand.net/#/marp" title="Markdown Presentations: Marp">Markdown Presentations: Marp</a></li></ul></li></ul></div></aside><section class="content"><article class="markdown-section" id="main"><h2 id="vector-databases"><a href="https://tds.s-anand.net/#/vector-databases?id=vector-databases" data-id="vector-databases" class="anchor"><span>Vector Databases</span></a></h2><p>Vector databases are specialized databases that store and search vector embeddings efficiently.</p><p>Use vector databases when your embeddings exceed available memory or when you want it run fast at scale. (This is important. If your code runs fast and fits in memory, you <strong>DON’T</strong> need a vector database. You can can use <code>numpy</code> for these tasks.)</p><p>Vector databases are an evolving space.</p><p>The first generation of vector databases were written in C and typically used an algorithm called <a href="https://en.wikipedia.org/wiki/Hierarchical_navigable_small_world" target="_blank" rel="noopener">HNSW</a> (a way to approximately find the nearest neighbor). Some popular ones are:</p><ul><li><strong><a href="https://github.com/chroma-core/chroma" target="_blank" rel="noopener">chroma 19,637 ⭐ May 2025</a></strong></li><li><strong><a href="https://github.com/qdrant/qdrant" target="_blank" rel="noopener">qdrant 23,341 ⭐ May 2025</a></strong></li><li><strong><a href="https://github.com/lancedb/lancedb" target="_blank" rel="noopener">lancedb 6,327 ⭐ May 2025</a></strong></li><li><strong><a href="https://github.com/facebookresearch/faiss" target="_blank" rel="noopener">faiss 34,684 ⭐ May 2025</a></strong></li><li><strong><a href="https://github.com/milvus-io/milvus" target="_blank" rel="noopener">milvus 34,476 ⭐ May 2025</a></strong></li><li><strong><a href="https://github.com/weaviate/weaviate" target="_blank" rel="noopener">weaviate 13,222 ⭐ May 2025</a></strong></li></ul><p>In addition, most relational databases now support vector search. For example:</p><ul><li><strong><a href="https://duckdb.org/" target="_blank" rel="noopener">DuckDB</a></strong>: Supports vector search with <a href="https://duckdb.org/docs/extensions/vss.html" target="_blank" rel="noopener"><code>vss</code></a>.</li><li><strong><a href="https://www.sqlite.org/" target="_blank" rel="noopener">SQLite</a></strong>: Supports vector search with <a href="https://github.com/asg017/sqlite-vec" target="_blank" rel="noopener"><code>sqlite-vec</code></a>.</li><li><strong><a href="https://www.postgresql.org/" target="_blank" rel="noopener">PostgreSQL</a></strong>: Supports vector search with <a href="https://github.com/pgvector/pgvector" target="_blank" rel="noopener"><code>pgvector</code></a>.</li></ul><p>Take a look at this <a href="https://superlinked.com/vector-db-comparison" target="_blank" rel="noopener">Vector DB Comparison</a>.</p><p>Watch this Vector Database Tutorial (3 min):</p><p><a href="https://youtu.be/klTvEwg3oJ4" target="_blank" rel="noopener"><img src="./Vector databases_files/sddefault.jpg" data-origin="https://i.ytimg.com/vi/klTvEwg3oJ4/sddefault.jpg" alt="Vector databases are so hot right now. WTF are they? (3 min)"></a></p><h3 id="chromadb"><a href="https://tds.s-anand.net/#/vector-databases?id=chromadb" data-id="chromadb" class="anchor"><span>ChromaDB</span></a></h3><p>Here’s a minimal example using Chroma:</p><pre v-pre="" data-lang="python" class="language-python"><code class="lang-python language-python"><span class="token comment"># /// script</span>
<span class="token comment"># requires-python = "==3.12"</span>
<span class="token comment"># dependencies = [</span>
<span class="token comment">#   "chromadb",</span>
<span class="token comment">#   "sentence-transformers",</span>
<span class="token comment"># ]</span>
<span class="token comment"># ///</span>

<span class="token keyword">import</span> chromadb
<span class="token keyword">from</span> chromadb<span class="token punctuation">.</span>utils <span class="token keyword">import</span> embedding_functions
<span class="token keyword">from</span> sentence_transformers <span class="token keyword">import</span> SentenceTransformer

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">setup_vector_db</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Initialize Chroma DB with an embedding function."""</span>
    sentence_transformer_ef <span class="token operator">=</span> embedding_functions<span class="token punctuation">.</span>SentenceTransformerEmbeddingFunction<span class="token punctuation">(</span>
        model_name<span class="token operator">=</span><span class="token string">"BAAI/bge-base-en-v1.5"</span>
    <span class="token punctuation">)</span>
    client <span class="token operator">=</span> chromadb<span class="token punctuation">.</span>PersistentClient<span class="token punctuation">(</span>path<span class="token operator">=</span><span class="token string">"./vector_db"</span><span class="token punctuation">)</span>
    collection <span class="token operator">=</span> client<span class="token punctuation">.</span>create_collection<span class="token punctuation">(</span>
        name<span class="token operator">=</span><span class="token string">"documents"</span><span class="token punctuation">,</span>
        embedding_function<span class="token operator">=</span>sentence_transformer_ef
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> collection

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">search_similar</span><span class="token punctuation">(</span>collection<span class="token punctuation">,</span> query<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> n_results<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token builtin">dict</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Search for documents similar to the query."""</span>
    d <span class="token operator">=</span> collection<span class="token punctuation">.</span>query<span class="token punctuation">(</span>query_texts<span class="token operator">=</span><span class="token punctuation">[</span>query<span class="token punctuation">]</span><span class="token punctuation">,</span> n_results<span class="token operator">=</span>n_results<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token string">"id"</span><span class="token punctuation">:</span> <span class="token builtin">id</span><span class="token punctuation">,</span> <span class="token string">"text"</span><span class="token punctuation">:</span> text<span class="token punctuation">,</span> <span class="token string">"distance"</span><span class="token punctuation">:</span> distance<span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token builtin">id</span><span class="token punctuation">,</span> text<span class="token punctuation">,</span> distance <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token string">"ids"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span><span class="token string">"documents"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span><span class="token string">"distances"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    collection <span class="token operator">=</span> <span class="token keyword">await</span> setup_vector_db<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># Add some documents</span>
    collection<span class="token punctuation">.</span>add<span class="token punctuation">(</span>
        documents<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"Apple is a fruit"</span><span class="token punctuation">,</span> <span class="token string">"Orange is citrus"</span><span class="token punctuation">,</span> <span class="token string">"Computer is electronic"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        ids<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">]</span>
    <span class="token punctuation">)</span>

    <span class="token comment"># Search</span>
    results <span class="token operator">=</span> <span class="token keyword">await</span> search_similar<span class="token punctuation">(</span>collection<span class="token punctuation">,</span> <span class="token string">"fruit"</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> asyncio
    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error" aria-hidden="hidden">Error</span><span class="success" aria-hidden="hidden">Copied</span><span aria-live="polite"></span></button></pre><h3 id="lancedb"><a href="https://tds.s-anand.net/#/vector-databases?id=lancedb" data-id="lancedb" class="anchor"><span>LanceDB</span></a></h3><p>Here’s the same example using LanceDB:</p><pre v-pre="" data-lang="python" class="language-python"><code class="lang-python language-python"><span class="token comment"># /// script</span>
<span class="token comment"># requires-python = "==3.12"</span>
<span class="token comment"># dependencies = [</span>
<span class="token comment">#   "lancedb",</span>
<span class="token comment">#   "pyarrow",</span>
<span class="token comment">#   "sentence-transformers",</span>
<span class="token comment"># ]</span>
<span class="token comment"># ///</span>

<span class="token keyword">import</span> lancedb
<span class="token keyword">import</span> pyarrow <span class="token keyword">as</span> pa
<span class="token keyword">from</span> sentence_transformers <span class="token keyword">import</span> SentenceTransformer

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">setup_vector_db</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Initialize LanceDB with an embedding function."""</span>
    model <span class="token operator">=</span> SentenceTransformer<span class="token punctuation">(</span><span class="token string">"BAAI/bge-base-en-v1.5"</span><span class="token punctuation">)</span>
    db <span class="token operator">=</span> lancedb<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">"./vector_db"</span><span class="token punctuation">)</span>

    <span class="token comment"># Create table with schema for documents</span>
    table <span class="token operator">=</span> db<span class="token punctuation">.</span>create_table<span class="token punctuation">(</span>
        <span class="token string">"documents"</span><span class="token punctuation">,</span>
        schema<span class="token operator">=</span>pa<span class="token punctuation">.</span>schema<span class="token punctuation">(</span><span class="token punctuation">[</span>
            pa<span class="token punctuation">.</span>field<span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> pa<span class="token punctuation">.</span>string<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            pa<span class="token punctuation">.</span>field<span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> pa<span class="token punctuation">.</span>string<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            pa<span class="token punctuation">.</span>field<span class="token punctuation">(</span><span class="token string">"vector"</span><span class="token punctuation">,</span> pa<span class="token punctuation">.</span>list_<span class="token punctuation">(</span>pa<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> list_size<span class="token operator">=</span><span class="token number">768</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> table<span class="token punctuation">,</span> model

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">search_similar</span><span class="token punctuation">(</span>table<span class="token punctuation">,</span> model<span class="token punctuation">,</span> query<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> n_results<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token builtin">dict</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Search for documents similar to the query."""</span>
    query_embedding <span class="token operator">=</span> model<span class="token punctuation">.</span>encode<span class="token punctuation">(</span>query<span class="token punctuation">)</span>
    results <span class="token operator">=</span> table<span class="token punctuation">.</span>search<span class="token punctuation">(</span>query_embedding<span class="token punctuation">)</span><span class="token punctuation">.</span>limit<span class="token punctuation">(</span>n_results<span class="token punctuation">)</span><span class="token punctuation">.</span>to_list<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token punctuation">:</span> r<span class="token punctuation">[</span><span class="token string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"text"</span><span class="token punctuation">:</span> r<span class="token punctuation">[</span><span class="token string">"text"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"distance"</span><span class="token punctuation">:</span> <span class="token builtin">float</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token string">"_distance"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token keyword">for</span> r <span class="token keyword">in</span> results<span class="token punctuation">]</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    table<span class="token punctuation">,</span> model <span class="token operator">=</span> <span class="token keyword">await</span> setup_vector_db<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># Add some documents</span>
    documents <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Apple is a fruit"</span><span class="token punctuation">,</span> <span class="token string">"Orange is citrus"</span><span class="token punctuation">,</span> <span class="token string">"Computer is electronic"</span><span class="token punctuation">]</span>
    embeddings <span class="token operator">=</span> model<span class="token punctuation">.</span>encode<span class="token punctuation">(</span>documents<span class="token punctuation">)</span>

    table<span class="token punctuation">.</span>add<span class="token punctuation">(</span>data<span class="token operator">=</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token string">"id"</span><span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"text"</span><span class="token punctuation">:</span> text<span class="token punctuation">,</span> <span class="token string">"vector"</span><span class="token punctuation">:</span> embedding<span class="token punctuation">}</span>
        <span class="token keyword">for</span> i<span class="token punctuation">,</span> <span class="token punctuation">(</span>text<span class="token punctuation">,</span> embedding<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>documents<span class="token punctuation">,</span> embeddings<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment"># Search</span>
    results <span class="token operator">=</span> <span class="token keyword">await</span> search_similar<span class="token punctuation">(</span>table<span class="token punctuation">,</span> model<span class="token punctuation">,</span> <span class="token string">"fruit"</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> asyncio
    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error" aria-hidden="hidden">Error</span><span class="success" aria-hidden="hidden">Copied</span><span aria-live="polite"></span></button></pre><h3 id="duckdb"><a href="https://tds.s-anand.net/#/vector-databases?id=duckdb" data-id="duckdb" class="anchor"><span>DuckDB</span></a></h3><p>Here’s the same example using DuckDB:</p><pre v-pre="" data-lang="python" class="language-python"><code class="lang-python language-python"><span class="token comment"># /// script</span>
<span class="token comment"># requires-python = "==3.12"</span>
<span class="token comment"># dependencies = [</span>
<span class="token comment">#   "duckdb",</span>
<span class="token comment">#   "sentence-transformers",</span>
<span class="token comment"># ]</span>
<span class="token comment"># ///</span>

<span class="token keyword">import</span> duckdb
<span class="token keyword">from</span> sentence_transformers <span class="token keyword">import</span> SentenceTransformer

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">setup_vector_db</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">tuple</span><span class="token punctuation">[</span>duckdb<span class="token punctuation">.</span>DuckDBPyConnection<span class="token punctuation">,</span> SentenceTransformer<span class="token punctuation">]</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Initialize DuckDB with VSS extension and embedding model."""</span>
    <span class="token comment"># Initialize model</span>
    model <span class="token operator">=</span> SentenceTransformer<span class="token punctuation">(</span><span class="token string">"BAAI/bge-base-en-v1.5"</span><span class="token punctuation">)</span>
    vector_dim <span class="token operator">=</span> model<span class="token punctuation">.</span>get_sentence_embedding_dimension<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># Setup DuckDB with VSS extension</span>
    conn <span class="token operator">=</span> duckdb<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">":memory:"</span><span class="token punctuation">)</span>
    conn<span class="token punctuation">.</span>install_extension<span class="token punctuation">(</span><span class="token string">"vss"</span><span class="token punctuation">)</span>
    conn<span class="token punctuation">.</span>load_extension<span class="token punctuation">(</span><span class="token string">"vss"</span><span class="token punctuation">)</span>

    <span class="token comment"># Create table with vector column</span>
    conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"""
        CREATE TABLE documents (
            id VARCHAR,
            text VARCHAR,
            vector FLOAT[</span><span class="token interpolation"><span class="token punctuation">{</span>vector_dim<span class="token punctuation">}</span></span><span class="token string">]
        )
    """</span></span><span class="token punctuation">)</span>

    <span class="token comment"># Create HNSW index for vector similarity search</span>
    conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"CREATE INDEX vector_idx ON documents USING HNSW (vector)"</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> conn<span class="token punctuation">,</span> model

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">search_similar</span><span class="token punctuation">(</span>conn<span class="token punctuation">:</span> duckdb<span class="token punctuation">.</span>DuckDBPyConnection<span class="token punctuation">,</span> model<span class="token punctuation">:</span> SentenceTransformer<span class="token punctuation">,</span>
                        query<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> n_results<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token builtin">dict</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Search for documents similar to query using vector similarity."""</span>
    <span class="token comment"># Encode query to vector</span>
    query_vector <span class="token operator">=</span> model<span class="token punctuation">.</span>encode<span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># Search using HNSW index with explicit FLOAT[] cast</span>
    results <span class="token operator">=</span> conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
        SELECT id, text, array_distance(vector, CAST(? AS FLOAT[768])) as distance
        FROM documents
        ORDER BY array_distance(vector, CAST(? AS FLOAT[768]))
        LIMIT ?
    """</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>query_vector<span class="token punctuation">,</span> query_vector<span class="token punctuation">,</span> n_results<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"id"</span><span class="token punctuation">:</span> r<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"text"</span><span class="token punctuation">:</span> r<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"distance"</span><span class="token punctuation">:</span> <span class="token builtin">float</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token keyword">for</span> r <span class="token keyword">in</span> results<span class="token punctuation">]</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    conn<span class="token punctuation">,</span> model <span class="token operator">=</span> <span class="token keyword">await</span> setup_vector_db<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># Add sample documents</span>
    documents <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Apple is a fruit"</span><span class="token punctuation">,</span> <span class="token string">"Orange is citrus"</span><span class="token punctuation">,</span> <span class="token string">"Computer is electronic"</span><span class="token punctuation">]</span>
    embeddings <span class="token operator">=</span> model<span class="token punctuation">.</span>encode<span class="token punctuation">(</span>documents<span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># Insert documents and vectors</span>
    conn<span class="token punctuation">.</span>executemany<span class="token punctuation">(</span><span class="token triple-quoted-string string">"""
        INSERT INTO documents (id, text, vector)
        VALUES (?, ?, ?)
    """</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> text<span class="token punctuation">,</span> embedding<span class="token punctuation">)</span>
          <span class="token keyword">for</span> i<span class="token punctuation">,</span> <span class="token punctuation">(</span>text<span class="token punctuation">,</span> embedding<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>documents<span class="token punctuation">,</span> embeddings<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment"># Search similar documents</span>
    results <span class="token operator">=</span> <span class="token keyword">await</span> search_similar<span class="token punctuation">(</span>conn<span class="token punctuation">,</span> model<span class="token punctuation">,</span> <span class="token string">"fruit"</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> asyncio
    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code><button class="docsify-copy-code-button"><span class="label">Copy to clipboard</span><span class="error" aria-hidden="hidden">Error</span><span class="success" aria-hidden="hidden">Copied</span><span aria-live="polite"></span></button></pre><div class="docsify-pagination-container">
        <div class="pagination-item pagination-item--previous">
          <a href="https://tds.s-anand.net/#/topic-modeling">
            <div class="pagination-item-label">
              <svg width="10" height="16" viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg">
                <polyline fill="none" vector-effect="non-scaling-stroke" points="8,2 2,8 8,14"></polyline>
              </svg>
              <span>Previous</span>
            </div>
            <div class="pagination-item-title">Topic modeling</div>
      <div class="pagination-item-subtitle"></div></a>
        </div>
      
        <div class="pagination-item pagination-item--next">
          <a href="https://tds.s-anand.net/#/rag-cli">
            <div class="pagination-item-label">
              <span>Next</span>
              <svg width="10" height="16" viewBox="0 0 10 16" xmlns="http://www.w3.org/2000/svg">
                <polyline fill="none" vector-effect="non-scaling-stroke" points="2,2 8,8 2,14"></polyline>
              </svg>
            </div>
            <div class="pagination-item-title">RAG with the CLI)</div>
      <div class="pagination-item-subtitle"></div></a>
        </div>
      </div></article></section></main>
  <script>
    window.$docsify = {
      name: 'Tools in Data Science',
      subMaxLevel: 2,
      themeColor: '#dc3545',
      loadSidebar: true,
      sidebarDisplayLevel: 0,
      pagination: {
        previousText: 'Previous',
        nextText: 'Next',
        crossChapter: true,
        crossChapterText: true
      },
    };

  </script>
  <script src="./Vector databases_files/docsify@4"></script>
  <script src="./Vector databases_files/search.js.download"></script>
  <script src="./Vector databases_files/zoom-image.min.js.download"></script>
  <script src="./Vector databases_files/docsify-pagination.min.js.download"></script>
  <script src="./Vector databases_files/docsify-themeable.min.js.download"></script>
  <script src="./Vector databases_files/docsify-copy-code.min.js.download"></script>
  <script src="./Vector databases_files/docsify-sidebar-collapse.min.js.download"></script>
  <script src="./Vector databases_files/prism-bash.min.js.download"></script>
  <script src="./Vector databases_files/prism-python.min.js.download"></script>
  <script src="./Vector databases_files/prism-sql.min.js.download"></script>
  <script src="./Vector databases_files/prism-yaml.min.js.download"></script>
  <script src="./Vector databases_files/prism-json.min.js.download"></script>
  <script src="./Vector databases_files/prism-markdown.min.js.download"></script>



<div class="progress" style="opacity: 0; width: 0%;"></div></body><grammarly-desktop-integration data-grammarly-shadow-root="true"><template shadowrootmode="open"><style>
      div.grammarly-desktop-integration {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select:none;
        user-select:none;
      }

      div.grammarly-desktop-integration:before {
        content: attr(data-content);
      }
    </style><div aria-label="grammarly-integration" role="group" tabindex="-1" class="grammarly-desktop-integration" data-content="{&quot;mode&quot;:&quot;full&quot;,&quot;isActive&quot;:true,&quot;isUserDisabled&quot;:false}"></div></template></grammarly-desktop-integration></html>